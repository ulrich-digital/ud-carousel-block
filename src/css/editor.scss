/* =============================================================== *\
   UD Carousel Block – Editor Styles (verschachtelt)
\* =============================================================== */

.cb-carousel-placeholder {
	align-items: center;
	display: flex;
}

.wp-block-ud-carousel-block {
	display: block;
	visibility: visible !important;
	background-color: white;
	border-radius: 1px;

	> .block-editor-inner-blocks {
		> .block-editor-block-list__layout {
			display: flex;
			flex-wrap: nowrap;
			overflow-y: hidden;
			padding: 2px;

			> [data-type="ud/slide-block"] {
				flex: 1;
				flex-basis: 100%;
				margin: 0 !important;
				max-width: 100%;
				min-width: 100%;
				padding: 10px;

				&:not(:first-child) {
					margin-left: 32px;
				}

				.block-editor-block-list__layout,
				.block-editor-inner-blocks {
					height: 100%;
				}

				> .block-editor-inner-blocks {
					> .block-editor-block-list__layout {
						> :first-child:not(.block-list-appender) {
							margin-top: 0;
						}
					}
				}
			}

			> .block-list-appender {
				align-self: flex-start !important;
				list-style: none !important;
				margin: 0 !important;
				padding: 0 !important;
				position: static !important;
				z-index: 2;

				.components-button svg {
					margin: 0 !important;
				}
			}
		}
	}

	/* Scrollbar aktiv, wenn Klasse gesetzt */
	&.ud-show-scrollbar {
		> .block-editor-inner-blocks {
			> .block-editor-block-list__layout {
				overflow-x: auto !important;
				padding-bottom: 15px;
			}
		}
	}

	/* Appender in Vertikalen Layouts */
	.is-vertical & .block-list-appender {
		width: auto !important;
	}

	/* Entfernt Margin an Testimonial Cards */
	.ud-testimonial-card {
		margin: 0;
	}

	/* Volle Breite bei Alignfull */
	&.alignfull {
		> .block-editor-inner-blocks {
			> .block-editor-block-list__layout {
				padding-left: 0;
			}
		}
	}

	/* Scrollbar-Styling */
	> .block-editor-inner-blocks {
		> .block-editor-block-list__layout {
			&::-webkit-scrollbar {
				-webkit-appearance: none;
				background-color: rgba(0, 0, 0, 0.15);
				height: 12px;
			}

			&::-webkit-scrollbar-thumb {
				background-color: rgba(0, 0, 0, 0.38);
				border-radius: 0;

				&:hover {
					background-color: rgba(0, 0, 0, 0.48);
				}
			}
		}
	}

	/* Wenn Block oder Kind ausgewählt → kein zusätzlicher Margin unten */
	&.has-child-selected,
	&.is-selected {
		> .block-editor-inner-blocks {
			> .block-editor-block-list__layout {
				> [data-type="ud/slide-block"] {
					> .block-editor-inner-blocks {
						> .block-editor-block-list__layout {
							> :nth-last-child(2),
							> :last-child:not(.block-list-appender) {
								margin-bottom: 0;
							}
						}
					}
				}
			}
		}
	}
}

/* =============================================================== *\
   Breakpoints-Vorschau im Editor
\* =============================================================== */
@media (min-width: 600px) {
	.ud-shows-2-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(50% - 16px) !important;
		max-width: calc(50% - 16px) !important;
		min-width: calc(50% - 16px) !important;
	}

	.ud-shows-3-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(33.33333% - 21.33333px) !important;
		max-width: calc(33.33333% - 21.33333px) !important;
		min-width: calc(33.33333% - 21.33333px) !important;
	}

	.ud-shows-4-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(25% - 24px) !important;
		max-width: calc(25% - 24px) !important;
		min-width: calc(25% - 24px) !important;
	}

	.ud-shows-5-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(20% - 25.6px) !important;
		max-width: calc(20% - 25.6px) !important;
		min-width: calc(20% - 25.6px) !important;
	}

	.ud-shows-6-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(16.66667% - 26.66667px) !important;
		max-width: calc(16.66667% - 26.66667px) !important;
		min-width: calc(16.66667% - 26.66667px) !important;
	}

	.ud-shows-7-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(14.28571% - 27.42857px) !important;
		max-width: calc(14.28571% - 27.42857px) !important;
		min-width: calc(14.28571% - 27.42857px) !important;
	}

	.ud-shows-8-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(12.5% - 28px) !important;
		max-width: calc(12.5% - 28px) !important;
		min-width: calc(12.5% - 28px) !important;
	}

	.ud-shows-9-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(11.11111% - 28.44444px) !important;
		max-width: calc(11.11111% - 28.44444px) !important;
		min-width: calc(11.11111% - 28.44444px) !important;
	}

	.ud-shows-10-slides
		> .block-editor-inner-blocks
		> .block-editor-block-list__layout
		> [data-type="ud/slide-block"] {
		flex-basis: calc(10% - 28.8px) !important;
		max-width: calc(10% - 28.8px) !important;
		min-width: calc(10% - 28.8px) !important;
	}
}
.ud-carousel-arrow-controls {
	margin-bottom: 20px;
}
.ud-carousel-arrow-existing {
	display: flex;
	justify-content: space-between;
	align-items: baseline;
	margin-bottom: 20px;
	.ud-carousel-arrow-actions {
		display: flex;
		gap: 8px;
	}
	.ud-carousel-arrow-preview {
		max-width: 40px;
		width: 100%;
		.ud-carousel-arrow-svg {
			display: block;
			background: var(--wp--preset--color--neutral-100);
			border-radius: 4px;
			padding: 4px;
		}
	}
}

.ud-help-text {
	font-size: 12px;
	color: #646970; // WP-Gray
	padding-top: 4px;
}

/* ===========================================
   Fix: Bildgröße im Editor beim Einfügen
   =========================================== */
.wp-block-ud-carousel-block
	[data-type="ud/slide-block"]
	.block-editor-inner-blocks {
	width: 100%;
}
.wp-block-ud-carousel-block [data-type="core/image"] img {
	max-width: 100% !important;
	width: 100% !important;
	height: auto !important;
	display: block;
}
